<div id="profile"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const supabase = supabase.createClient(
    "https://tstsijdifhgmpaszqknr.supabase.co",
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRzdHNpamRpZmhnbXBhc3pxa25yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5NzA1NTIsImV4cCI6MjA3ODU0NjU1Mn0.8AvcLNL-6PIlfw2FUeLcMC9atefZmZAyUQBOquGpVo4"
  );

  async function loadProfile() {
    const { data: { user }} = await supabase.auth.getUser();

    if (!user) {
      document.getElementById("profile").innerHTML = "You are not logged in.";
      return;
    }

    const { data: profile } = await supabase
      .from("profiles")
      .select("*")
      .eq("id", user.id)
      .single();

    document.getElementById("profile").innerHTML = `
      <div class="profile-card">
        <img src="${profile.avatar_url}" class="avatar">
        <h2>${profile.username}</h2>
        <p>Discord ID: ${profile.discord_id}</p>
      </div>
    `;
  }

  loadProfile();
</script>
